"use strict";!function(l){var u={admin:wc_pos_params,metaBoxes:wc_pos_admin_meta_boxes_params},h={states:null,init:function(){void 0!==u.metaBoxes.countries&&(this.states=l.parseJSON(u.metaBoxes.countries.replace(/&quot;/g,'"'))),l(".js_field-country").selectWoo().change(this.change_country),l(".js_field-country").trigger("change",[!0]),l(document.body).on("change","select.js_field-state",this.change_state).on("change","\n\t\t\t\t\t.wc_pos_input_email[type=text],\n\t\t\t\t\t.wc_pos_input_phone[type=text],\n\t\t\t\t\t.wc_pos_input_fax[type=text],\n\t\t\t\t\t.wc_pos_input_url[type=text]",this.validate).on("wc_pos_add_error_tip",this.addErrorTip).on("wc_pos_remove_error_tip",this.removeErrorTip).on("click","#use-store-address",this.useStoreAddress)},change_country:function(t,e){var s,a,o,r,i,n,_,c,p,d;void 0===e&&(e=!1),null!==h.states&&(a=(s=l(this)).val(),p=(o=s.parents(".postbox").find(":input.js_field-state")).parent(),r=o.attr("name"),i=o.attr("id"),n=s.data(_="woocommerce.stickState-"+a)?s.data(_):o.val(),_=o.attr("placeholder"),e&&s.data("woocommerce.stickState-"+a,n),p.show().find(".select2-container").remove(),l.isEmptyObject(h.states[a])?(d=l('<input type="text" />').prop("id",i).prop("name",r).prop("placeholder",_).addClass("js_field-state regular-text").val(n),o.replaceWith(d)):(c=h.states[a],p=l('<option value=""></option>').text(u.metaBoxes.i18n_select_state_text),d=l('<select style="width:50%;"></select>').prop("id",i).prop("name",r).prop("placeholder",_).addClass("js_field-state").append(p),l.each(c,function(t){t=l("<option></option>").prop("value",t).text(c[t]);d.append(t)}),d.val(n),o.replaceWith(d),d.show().selectWoo().hide().change()),l(document.body).trigger("country-change.woocommerce",[a,l(this).closest("div")]))},change_state:function(){var t=l(this),e=t.val(),s=t.parents(".postbox").find(":input.js_field-country"),t=s.val();s.data("woocommerce.stickState-"+t,e)},validate:function(){var t,e=l(this).val();l(this).is(".wc_pos_input_email")&&(/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)||(t="i18n_email_error")),(l(this).is(".wc_pos_input_phone")||l(this).is(".wc_pos_input_fax"))&&(/^[+]*[(]{0,1}[0-9]{1,4}[)]{0,1}[-\s\./0-9]*$/g.test(e)||(t=l(this).is(".wc_pos_input_fax")?"i18n_fax_error":"i18n_phone_error")),l(this).is(".wc_pos_input_url")&&(/^(http[s]?:\/\/){0,1}(www\.){0,1}[a-zA-Z0-9\.\-]+\.[a-zA-Z]{2,5}[\.]{0,1}/.test(e)||(t="i18n_url_error")),void 0!==t?(l(document.body).triggerHandler("wc_pos_add_error_tip",[l(this),t]),l(this).val("")):l(document.body).triggerHandler("wc_pos_remove_error_tip",[l(this),t])},addErrorTip:function(t,e,s){var a=e.position();0===e.parent().find(".wc_error_tip").length&&(e.after('<div class="wc_error_tip '+s+'">'+u.metaBoxes[s]+"</div>"),e.parent().find(".wc_error_tip").css("left",a.left+e.width()-e.width()/2-l(".wc_error_tip").width()/2).css("top",a.top+e.height()).fadeIn("100"))},removeErrorTip:function(t,e,s){e.parent().find(".wc_error_tip."+s).fadeOut("100",function(){l(this).remove()})},useStoreAddress:function(){var t;return window.confirm(u.metaBoxes.i18n_confirm_use_store_address)&&((t=l("form#post")).find('[name="address_1"]').val(u.metaBoxes.base_address_1),t.find('[name="address_2"]').val(u.metaBoxes.base_address_2),t.find('[name="city"]').val(u.metaBoxes.base_city),t.find('[name="postcode"]').val(u.metaBoxes.base_postcode),t.find('[name="country"]').val(u.metaBoxes.base_country).trigger("change"),t.find('[name="state"]').val(u.metaBoxes.base_state).trigger("change")),!1}};h.init()}(jQuery);