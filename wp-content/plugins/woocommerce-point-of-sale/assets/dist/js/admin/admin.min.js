"use strict";!function(n,s){var i=s.wc_pos_params;n(".form-table").on("click","#enable_card",function(e){e.preventDefault();e=n(this).prev("input#wc_pos_user_card_number");e.is(":disabled")&&(""===e.val()||s.confirm("Are you sure you want to change the card number?"))&&e.removeAttr("disabled")}),n(".post-type-pos_register .submitdelete").on("click",function(){if(!s.confirm(i.i18n_confirm_delete_register))return!1}),n('.post-type-pos_register .bulkactions input[type="submit"]').on("click",function(){var e=n('.bulkactions select[name="action"]').val();if(("trash"===e||"delete"===e)&&!s.confirm(i.i18n_confirm_delete_registers))return!1}),n("#wc_pos_signature").change(function(){n(this).is(":checked")?(n("#wc_pos_signature_required").closest("tr").show(),n("#wc_pos_signature_required_on").closest("tr").show()):(n("#wc_pos_signature_required").closest("tr").hide(),n("#wc_pos_signature_required_on").closest("tr").hide())}).change(),n("input#wc_pos_day_end_report").change(function(){n(this).is(":checked")?n("#wc_pos_day_end_emails").closest("tr").show():n("#wc_pos_day_end_emails").closest("tr").hide()}).change(),n("input#wc_pos_enable_currency_rounding").change(function(){n(this).is(":checked")?n("#wc_pos_currency_rounding_value").closest("tr").show():n("#wc_pos_currency_rounding_value").closest("tr").hide()}).change();jQuery(document).ready(function(){jQuery(".reprint_receipts").attr("target","_blank"),jQuery(".modal-close").on("click",function(e){e.preventDefault()}),jQuery("#wc_pos_user_card_number").on("keyup change",function(e){e=e.target.value;5<e.length&&jQuery.ajax({url:i.ajax_url,async:!0,type:"POST",data:{action:"wc_pos_check_user_card_uniqueness",security:i.check_user_card_uniqueness_nonce,code:e},success:function(e){jQuery("#wc_pos_user_card_number").closest("td").find(".description").html(e.data),!0===e.success?jQuery("#submit").attr("disabled",!1):jQuery("#submit").attr("disabled",!0)}})})});n(".tips, .help_tip, .woocommerce-help-tip").tipTip({attribute:"data-tip",fadeIn:50,fadeOut:50,delay:200}),0<n('input[name="products_or_cat"]').length&&(n('input[name="products_or_cat"]').change(function(){"category"==n('input[name="products_or_cat"]:checked').val()?(n("#products_opt_wrap").hide(),n("#category_opt_wrap").show()):(n("#products_opt_wrap").show(),n("#category_opt_wrap").hide())}).trigger("change"),n().select2?n(".category_chosen").css("width","400px").select2():n(".category_chosen").css("width","400px").chosen()),n().select2?(jQuery("select#billing_country").select2(),jQuery("select#shipping_country").select2(),0<jQuery("select#billing_state").length&&jQuery("select#billing_state").select2(),0<jQuery("select#shipping_state").length&&jQuery("select#shipping_state").select2()):(jQuery("select#billing_country").chosen(),jQuery("select#shipping_country").chosen(),0<jQuery("select#billing_state").length&&jQuery("select#billing_state").chosen(),0<jQuery("select#shipping_state").length&&jQuery("select#shipping_state").chosen()),0<n("#wc_pos_tax_calculation").length&&(n(".disabled_select").attr("disabled","disabled"),n("#wc_pos_tax_calculation").change(function(){"disabled"===n(this).val()?n("#wc_pos_calculate_tax_based_on").parent().parent().hide():n("#wc_pos_calculate_tax_based_on").parent().parent().show()}).change()),jQuery("#pos-visibility .edit-pos-visibility").on("click",function(e){e.preventDefault(),jQuery("#pos-visibility #pos-visibility-select").slideDown("fast")}),jQuery("#pos-visibility .save-post-visibility").on("click",function(e){e.preventDefault();e=jQuery('[name="_pos_visibility"]:checked');jQuery("#pos-visibility-display").text(e.data("label")),jQuery("#pos-visibility #pos-visibility-select").slideUp("fast")}),jQuery('.wc-enhanced-select-required-fields option[value="billing_first_name"],.wc-enhanced-select-required-fields option[value="billing_last_name"],.wc-enhanced-select-required-fields option[value="billing_email"]').attr({selected:"selected",disabled:"disabled"}),jQuery(".wc-enhanced-select-required-fields").select2().on("select2:unselecting",function(e){if(e.params.args.data.disabled)return!1}),jQuery('#wc_pos_search_includes.wc-enhanced-select option[value="title"]').attr({selected:"selected",disabled:"disabled"}),jQuery("#wc_pos_search_includes.wc-enhanced-select").select2().on("select2:unselecting",function(e){if(e.params.args.data.disabled)return!1}),n("#pos_custom_user_fields #wc_pos_assigned_outlets").selectWoo({multiple:!0,width:"350px",placeholder:"No Outlet",allowClear:!0}),n(".wc-item-reorder-nav").find(".wc-move-up, .wc-move-down").on("click",function(){var e=n(this),t=e.closest("tr");e.focus();var s=e.is(".wc-move-up"),i=e.is(".wc-move-down");s?(s=t.prev("tr"))&&s.length&&s.before(t):!i||(i=t.next("tr"))&&i.length&&i.after(t),e.focus(),e.closest("table").trigger("updateMoveButtons")}).closest("table").on("updateMoveButtons",function(){var e=n(this),t=n(this).find("tbody tr:last"),s=n(this).find("tbody tr:first");e.find(".wc-item-reorder-nav .wc-move-disabled").removeClass("wc-move-disabled").attr({tabindex:"0","aria-hidden":"false"}),s.find(".wc-item-reorder-nav .wc-move-up").addClass("wc-move-disabled").attr({tabindex:"-1","aria-hidden":"true"}),t.find(".wc-item-reorder-nav .wc-move-down").addClass("wc-move-disabled").attr({tabindex:"-1","aria-hidden":"true"})}).closest("table").trigger("updateMoveButtons"),n("#wc_pos_reset_settings").on("click",function(e){s.confirm("This will reset entire POS settings. Please have a backup before doing this")||e.preventDefault()});var e=n("#wc_pos_customer_create_required_fields");e.length&&((t=n('<button type="button" class="button reset_fields">Reset</button>')).on("click",function(){e.val(["billing_first_name","billing_last_name","billing_email","billing_country","billing_address_1","billing_city","billing_state","billing_postcode","billing_phone","billing_email"]).change()}),e.parent("td").append(t)),n(".range_slider").on("input",function(){n(this).prev(".range_slider_value").html(n(this).val())});var t=n("#unit_of_measurement");n.each(t,function(){var e=n(this).parents("p");n(this).is(":checked")||e.nextAll("p").hide(),n(this).on("change",function(){n(this).is(":checked")?e.nextAll("p").show():e.nextAll("p").hide()})}),n("#paymentsense_eod_report").on("click",function(){var t=n("#wpcontent");t.find("#sale_report_overlay").remove(),t.block({message:null,opacity:.6}),n.ajax({url:s.ajaxurl,data:{register:n("#post_ID").val(),action:"wc_pos_paymentsense_eod_report",security:i.paymentsense_eod_report_nonce,terminal_id:n("#paymentsense_terminal").val()},type:"POST",success:function(e){e.data&&t.append(n(e.data))},error:function(e){e.responseJSON?s.alert(e.responseJSON.data.message):s.alert(e.statusText)},complete:function(){t.unblock()}})}),n("#wpcontent").on("click",".close_popup, .back_to_sale",function(){n(".overlay_order_popup").hide()})}(jQuery,window,document);